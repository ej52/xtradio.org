<script>
  import { createEventDispatcher } from "svelte";
  const dispatch = createEventDispatcher();

  export let loading = false,
    loaded = false;

  function start() {
    dispatch("start");
  }
</script>

<style lang="postcss">
  .wrapper {
    transition: height 0.7s cubic-bezier(0, 0.55, 0.45, 1);

    @apply w-full h-full absolute bottom-0 left-0 overflow-hidden bg-splash z-90;

    &.loaded {
      @apply h-0 bg-controls mb-16 z-40;
    }

    .button {
      top: 50%;

      @apply w-48 h-16 text-5xl text-white font-bold flex items-center content-center 
      relative bg-center bg-no-repeat -mt-8 mx-auto cursor-pointer;

      .icon {
          background-size: 100%;

          @apply w-16 h-16 block relative bg-center bg-no-repeat ml-1;
      }
    }

    .loader {
      filter: brightness(0) invert(1);
      background-size: 100%;
      top: 50%;

      @apply w-40 h-40 block relative bg-center bg-no-repeat -mt-20 mx-auto;
    }
  }

  @keyframes -global-breath {
    0% {
      animation-timing-function: cubic-bezier(0.9647, 0.2413, -0.0705, 0.7911);
      transform: scale(0.83);
    }
    51% {
      animation-timing-function: cubic-bezier(0.9226, 0.2631, -0.0308, 0.7628);
      transform: scale(1.10986);
    }
    100% {
      transform: scale(0.83);
    }
  }
</style>

<div class="wrapper" class:loaded>
  {#if !loaded}
    {#if !loading}
      <a class="button pl-4" on:click={start}>
        PLAY <span class="icon icon-play"></span>
      </a>
    {:else}
      <svg
        class="loader"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        width="260px"
        height="260px"
        viewBox="0 0 100 100">
        <g
          transform="translate(50 50) rotate(0) scale(1.6, 1.6) translate(-50
          -50)">
          <image
            x="0"
            y="0"
            width="100"
            height="100"
            href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA4UAAAJZCAYAAAAeW5BAAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAEuRJREFUeNrs2k9LHAccxvHZGLGGavyDpNC0CQRyKjSUevfeS285at5Brh569tp3sPGYW15C74FiIJcGCjFJC0HUNVtiU4nT2YYt9iI7uy125vl8QJYUe3D44T5f3E5ZlgUAAACZLnkEAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAABCFAAAAiEIAAABEIQAAAKIQAAAAUQgAAIAoBAAAQBQCAAAgCgEAABCFAAAAiEIAAABEIQAAAKIQAAAAUQgAAIAoBAAAQBQCAAAgCgEAABCFAAAAiEIAAABEIQAAAKIQAAAAUQgAAIAoBAAAQBQCAAAgCgEAABCFAAAAiEIAAABEIQAAAKIQAAAAUQgAAIAoBAAAQBQCAAAgCgEAABCFAAAAiEIAAABEIQAAAKIQAAAAUQgAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAIAoBAAAQBQCAAAgCgEAABCFAAAAiEIAAABEIQAAAKIQAAAAUQgAAIAoBAAAQBQCAAAgCgEAABCFAAAAiEIAAABEIQAAAKIQAAAAUQgAAMD/yWWPACDD8ub2RvVyv/pa299a73kijOr13cXB7Xw/uJ1rDw93PBGAdvGXQoCcIOxWX19WXz9U/17wVKgRhIPbuTq4nerfdzwVAFEIQDODcEgYUjcIh4QhgCgEoOFBKAwZNwiFIYAoBKAlQSgMGTcIhSGAKASgJUEoDBk3CIUhgCgEoCVBKAwZNwiFIYAoBKAlQSgMGTcIhSGAKASgJUEoDAXhpLcjDAFEIQAND0JhKAgnJQwBRCEADQ9CYSgIhSGAKASgzUE4d/qHMGSsIOxNrwhDAFEIQJODcLW/W3y9/1Ox8v6tMBSEtW7nx4/vFN/NfPPXqzAEEIUANDQI548Pi0vl++KLg5+FoSCsFYTd4kPbDV6FIYAoBKChQfj3L35hKAjHCMIhYQggCgFocBAKQ0E4SRAKQwBRCEALglAYCsJJglAYAohCAFoQhMJQEE4ShMIQQBQC0IIgFIaCcJIgFIYAohCAFgShMBSEkwShMAQQhQC0IAiFoSCcJAiFIYAoBKAFQSgMBeG/QRgCiEIAGhyEwlAQCkMAUQhAeBAKQ0EoDAFEIQDhQSgMBaEwBBCFAIQHoTAUhMIQQBQCEB6EwlAQCkMAUQhAeBAKQ0EoDAFEIQDhQSgMBaEwBBCFAIQHoTAUhMIQQBQCEB6EwlAQCkMAUQhAeBAKQ0EoDAFEIQDhQSgMBaEwBBCFAIQHoTAUhMIQQBQCEB6EwlAQCkMAUQhAeBAKQ0EoDAFEIQDhQSgMBaEwBBCFAIQHoTAUhMIQQBQCEB6EwlAQCkMAUQggCMODUBgKQmEIIAoBBGF4EApDQSgMAUQhQGIQ3qwz6m+/O2h1EArDWkFY63Z60yutD8KzYTj4eWuE4SO/jQBEIcCF2N9af1693Bv1+5/NLBVvZhcz3miE4bmuPTysdTsLJ3vVN+9E3M7g5xz8vCM6qr6+9dsIQBQCXGQYPqgz7h/P3RCGwnAYhrVu56vfdlofhoOfb/Bz1gjCteo5ZtQygCgEEIbCUBi2OQwFIYAoBBCGwlAYhoahIAQQhQDCUBgKw9AwFIQAohBAGApDYRgahoIQQBQCCENhKAxDw1AQAohCAGEoDIVhaBgKQgBRCCAMhaEwDA1DQQggCgGEoTAUhqFhKAgBRCGAMBSGwjA0DAUhgCgEEIbCUBiGhqEgBBCFAAhDYRgahoIQQBQCIAyFYWgYCkIAUQiAMBSGoWEoCAFEIQDCUBiGhqEgBBCFAAhDYRgahoIQQBQCIAyFYWgYCkIAUQiAMBSGoWEoCAFEIQDCUBiGhqEgBBCFAAhDYRgahoIQQBQCIAyFYWgYCkIAUQiAMBSGoWEoCAFEIQDCUBiGhqEgBBCFAAhDYRgahoIQQBQCIAyFYWgYCkIAUQiAMBSGoWEoCAFEIQDCUBiGhqEgBBCFAAhDYRgahoIQoJ06ZVl6CgANVYXMRvXSHfX7V/u7xfzxYcSzOe1MFU+XbhV7U1dG/V+eDCKmCu5ewvN5fXex1u30pleKhZM9QQggCgEQhsIwNQwFIUA7+fgoQMP5KOk5b3I+Snquuh8lFYQAohAAYSgMhaEgBBCFAAhDYSgMBSGAKARAGApDYSgIAUQhAMJQGMaGoSAEEIUACENhGBqGghBAFAIgDIVhaBgKQgBRCIAwFIahYSgIAUQhAMJQGIaGoSAEEIUACENhGBqGghCgpTplWXoKACGqkNmoXrqjfv9qf7eYPz6MeDannani6dKtYm/qyqj/y5NBJFXB3XNZADSZvxQCBPEXw3PeEP3FEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIbCEABRCIAwFIYAIAoBEIbCEABEIQDCUBgCgCgEQBgKQwAQhQAIQ2EIAKIQAGEoDAFAFAIgDIUhAIhCAIShMAQAUQiAMBSGACAKAWi6t5dnc96EhSEAohCANqviZaN66Y76/bffHRSf9H/NeiMWhgCIQgAE4Ycg/OzoReabsTAEQBQCIAhfRD8zYQiAKARAEKa/KQtDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAEQhAIJQGApDAFEIAIJQGApDAFEIgCAUhMJQGAKIQgAEoSAUhgCIQgAEoSAUhgCIQgAEoSAUhgCIQgAEoSAUhgCIQgAEIcIQAFEIgCBEGAIgCgEQhK3x8urnxZvZRWEoDAFEIQCCMDEIn80sFY/nbghDYQggCgEQhIlBOCQMhSGAKARAEIYGoTAUhgCiEABBGB6EwlAYAohCAARheBAKQ2EIIAoBEIThQSgMhSGAKARAEIYHoTAUhgCiEABBGB6EwlAYAohCAARheBAKQ2EIIAoBEIThQSgMhSGAKARAELY7CI+EoTAEEIUACMLcIFyrvu4JQ2EIIAoBEISBQbi/tb5TfT0QhsIQQBQCIAgDg3D4H4ShMAQQhQAIwtAgFIbCEEAUAiAIw4NQGApDAFEIgCAMD0JhKAwBRCEAgjA8CIWhMAQQhQAIwvAgFIbCEEAUAiAIw4NQGApDAFEIgCAMD0JhKAwBRCEAgjA8CIWhMAQQhQAIwvAgFIbCEEAUAiAIw4NQGApDAFEIgCAMD0JhKAwBRCEAgjA8CIWhMAQQhQAIwvAgFIbCEEAUAiAIw4NQGApDAFEIgCAMD0JhKAwBRCEAgjA8CIWhMAQQhQAIwvAgFIbCEEAUAiAIw4NQGApDAFEIgCAMD0JhKAwBRCEAgjA8CIWhMAQQhQAIwvAgFIbCEEAUAghCQRgehMJQGAKIQgBBKAjDg1AYCkMAUQggCAVheBAKQ2EIIAoBBKEgDA9CYSgMAUQhgCAUhOFBKAyFIYAoBGhnEN6sE4TXT/qCMDgIheHoYfhR9VojDB/5bQQgCgEuatw/rzPuX03PxYx7QSgMx/XL/KfF752pOrdz328jAFEIYNwLQrfjdgAQhQDGvVHvdtwOAKIQwLg36t2O2wFAFAIY90a923E7AIhCAOPeqHc7bgcAUQhg3Bv1bsftACAKAYx7o97tuB0ARCGAcW/Uux23AyAKATDujXq343YARCEAxr1R73bcDoAoBMC4N+rdjtsBEIUAGPdGvdtxOwCiEADj3qh3O24HQBQCkD3ujXq343YARCEAoePeqHc7bgdAFAIQOu6NerfjdgBEIQCh496odztuB0AUAhA67o16t+N2AEQhAKHj3qh3O24HQBQCEDrujXq343YARCEAoePeqHc7bgdAFAIQOu6NerfjdgBEIQCh496odztuB0AUAhA67o16t+N2AEQhAKHj3qh3O24HAFEIEDrujXq343YAEIUAoePeqHc7bgcAUQgQOu6NerfjdgA4q1OWpacA0FDLm9sb1Ut31O+/ftIvXk3PGfW4HQBEIUDquDfqcTsAnOXjowANV/fjgEY9bgcAUQhg3Bv1uB0ARCGAcW/U43YARCEAxr1R73bcDoAoBCB23Bv1uB0AUQhA6Lg36nE7AKIQgNBxb9TjdgAQhQCh496ox+0AIAoBQse9UY/bAUAUAoSOe6MetwPAP3TKsvQUAEIsb24vVKO+50ngdgAQhQAAAPj4KAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAABEoUcAAAAgCgEAABCFAAAAiEIAAABEIQAAAKIQAAAAUQgAAIAoBAAAQBQCAAAgCgEAABCFAAAAiEIAAABEIQAAAKIQAAAAUQgAAIAoBAAAQBQCAAAgCgEAABCFAAAAiEIAAABEIQAAAKIQAAAAUQgAAIAoBAAAQBQCAAAgCgEAABCFAAAAiEIAAABEIQAAAKIQAAAAUQgAAIAoBAAAQBQCAAAgCgEAABCFAAAAiEIAAABEIQAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAEQhAAAAohAAAABRCAAAgCgEAABAFAIAACAKAQAAEIUAAACIQgAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAACiEAAAAFEIAACAKAQAAEAUAgAAIAoBAAAQhQAAAIhCAAAARCEAAAD/rT8FGAApgASOxNlNBAAAAABJRU5ErkJggg=="
            class=""
            style="transform-origin: 50% 50%;animation: 1.11111s linear 0s
            infinite normal forwards running breath;" />
        </g>
      </svg>
    {/if}
  {/if}
</div>
